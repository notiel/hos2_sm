<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:java="http://www.yworks.com/xml/yfiles-common/1.0/java" xmlns:sys="http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0" xmlns:x="http://www.yworks.com/xml/yfiles-common/markup/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:y="http://www.yworks.com/xml/graphml" xmlns:yed="http://www.yworks.com/xml/yed/3" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd">
  <!--Created by yEd 3.19-->
  <key attr.name="Description" attr.type="string" for="graph" id="d0"/>
  <key for="port" id="d1" yfiles.type="portgraphics"/>
  <key for="port" id="d2" yfiles.type="portgeometry"/>
  <key for="port" id="d3" yfiles.type="portuserdata"/>
  <key attr.name="url" attr.type="string" for="node" id="d4"/>
  <key attr.name="description" attr.type="string" for="node" id="d5"/>
  <key for="node" id="d6" yfiles.type="nodegraphics"/>
  <key for="graphml" id="d7" yfiles.type="resources"/>
  <key attr.name="url" attr.type="string" for="edge" id="d8"/>
  <key attr.name="description" attr.type="string" for="edge" id="d9"/>
  <key for="edge" id="d10" yfiles.type="edgegraphics"/>
  <graph edgedefault="directed" id="G">
    <data key="d0"/>
    <node id="n0" yfiles.foldertype="group">
      <data key="d6">
        <y:ProxyAutoBoundsNode>
          <y:Realizers active="0">
            <y:GroupNode>
              <y:Geometry height="841.6643547434517" width="839.0427906633372" x="93.70519736701829" y="-182.9169230769232"/>
              <y:Fill color="#F5F5F5" transparent="false"/>
              <y:BorderStyle color="#000000" type="line" width="1.0"/>
              <y:NodeLabel alignment="center" autoSizePolicy="node_width" backgroundColor="#EBEBEB" borderDistance="0.0" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="839.0427906633372" x="0.0" xml:space="preserve" y="0.0">health</y:NodeLabel>
              <y:NodeLabel alignment="left" autoSizePolicy="node_size" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="841.6643547434517" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="839.0427906633372" x="0.0" xml:space="preserve" y="4.0">

entry/

</y:NodeLabel>
              <y:Shape type="roundrectangle"/>
              <y:State closed="false" closedHeight="50.0" closedWidth="50.0" innerGraphDisplayEnabled="false"/>
              <y:NodeBounds considerNodeLabelSize="true"/>
              <y:Insets bottom="15" bottomF="15.0" left="15" leftF="15.0" right="15" rightF="15.0" top="15" topF="15.0"/>
              <y:BorderInsets bottom="0" bottomF="0.0" left="31" leftF="31.25" right="0" rightF="0.0" top="0" topF="0.0"/>
            </y:GroupNode>
            <y:GroupNode>
              <y:Geometry height="50.0" width="82.0" x="291.0" y="195.0"/>
              <y:Fill color="#F5F5F5" transparent="false"/>
              <y:BorderStyle color="#000000" type="line" width="1.0"/>
              <y:NodeLabel alignment="right" autoSizePolicy="node_width" backgroundColor="#EBEBEB" borderDistance="0.0" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="82.0" x="0.0" xml:space="preserve" y="0.0">get_shot</y:NodeLabel>
              <y:Shape type="roundrectangle"/>
              <y:State closed="true" closedHeight="50.0" closedWidth="82.0" innerGraphDisplayEnabled="false"/>
              <y:NodeBounds considerNodeLabelSize="true"/>
              <y:Insets bottom="5" bottomF="5.0" left="5" leftF="5.0" right="5" rightF="5.0" top="5" topF="5.0"/>
              <y:BorderInsets bottom="0" bottomF="0.0" left="0" leftF="0.0" right="0" rightF="0.0" top="0" topF="0.0"/>
            </y:GroupNode>
          </y:Realizers>
        </y:ProxyAutoBoundsNode>
      </data>
      <graph edgedefault="directed" id="n0:">
        <node id="n0::n0" yfiles.foldertype="group">
          <data key="d6">
            <y:ProxyAutoBoundsNode>
              <y:Realizers active="0">
                <y:GroupNode>
                  <y:Geometry height="226.22145158115052" width="665.4165541936063" x="139.9551973670183" y="413.5259800853779"/>
                  <y:Fill color="#F5F5F5" transparent="false"/>
                  <y:BorderStyle color="#000000" type="line" width="1.0"/>
                  <y:NodeLabel alignment="center" autoSizePolicy="node_width" backgroundColor="#EBEBEB" borderDistance="0.0" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="665.4165541936063" x="0.0" xml:space="preserve" y="0.0">dead</y:NodeLabel>
                  <y:NodeLabel alignment="left" autoSizePolicy="node_size" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="226.22145158115052" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="665.4165541936063" x="0.0" xml:space="preserve" y="4.0">

entry/
  Player_Died(me);</y:NodeLabel>
                  <y:Shape type="roundrectangle"/>
                  <y:State closed="false" closedHeight="50.0" closedWidth="50.0" innerGraphDisplayEnabled="false"/>
                  <y:NodeBounds considerNodeLabelSize="true"/>
                  <y:Insets bottom="15" bottomF="15.0" left="15" leftF="15.0" right="15" rightF="15.0" top="15" topF="15.0"/>
                  <y:BorderInsets bottom="54" bottomF="53.84498673740052" left="40" leftF="39.71942067653072" right="27" rightF="26.987881791901486" top="20" topF="20.0"/>
                </y:GroupNode>
                <y:GroupNode>
                  <y:Geometry height="50.0" width="82.0" x="383.0" y="358.62353515625"/>
                  <y:Fill color="#F5F5F5" transparent="false"/>
                  <y:BorderStyle color="#000000" type="line" width="1.0"/>
                  <y:NodeLabel alignment="right" autoSizePolicy="node_width" backgroundColor="#EBEBEB" borderDistance="0.0" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="82.0" x="0.0" xml:space="preserve" y="0.0">get_shot</y:NodeLabel>
                  <y:Shape type="roundrectangle"/>
                  <y:State closed="true" closedHeight="50.0" closedWidth="82.0" innerGraphDisplayEnabled="false"/>
                  <y:NodeBounds considerNodeLabelSize="true"/>
                  <y:Insets bottom="5" bottomF="5.0" left="5" leftF="5.0" right="5" rightF="5.0" top="5" topF="5.0"/>
                  <y:BorderInsets bottom="0" bottomF="0.0" left="0" leftF="0.0" right="0" rightF="0.0" top="0" topF="0.0"/>
                </y:GroupNode>
              </y:Realizers>
            </y:ProxyAutoBoundsNode>
          </data>
          <graph edgedefault="directed" id="n0::n0:">
            <node id="n0::n0::n0">
              <data key="d6">
                <y:GenericNode configuration="com.yworks.entityRelationship.big_entity">
                  <y:Geometry height="100.0" width="247.01953125" x="194.674618043549" y="470.9024449291279"/>
                  <y:Fill color="#E8EEF7" color2="#B7C9E3" transparent="false"/>
                  <y:BorderStyle color="#000000" type="line" width="1.0"/>
                  <y:NodeLabel alignment="center" autoSizePolicy="node_width" backgroundColor="#B7C9E3" configuration="com.yworks.entityRelationship.label.name" fontFamily="Dialog" fontSize="15" fontStyle="bold" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="247.01953125" x="0.0" xml:space="preserve" y="4.0">just_dead</y:NodeLabel>
                  <y:NodeLabel alignment="left" autoSizePolicy="content" configuration="com.yworks.entityRelationship.label.attributes" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="64.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="135.953125" x="2.0" xml:space="preserve" y="34.37646484375">entry/


TIME_TICK_1S[else]/
    me-&gt;DeathTime++;<y:LabelModel><y:ErdAttributesNodeLabelModel/></y:LabelModel><y:ModelParameter><y:ErdAttributesNodeLabelModelParameter/></y:ModelParameter></y:NodeLabel>
                  <y:StyleProperties>
                    <y:Property class="java.lang.Boolean" name="y.view.ShadowNodePainter.SHADOW_PAINTING" value="true"/>
                    <y:Property class="java.lang.Boolean" name="doubleBorder" value="false"/>
                  </y:StyleProperties>
                </y:GenericNode>
              </data>
            </node>
            <node id="n0::n0::n1">
              <data key="d6">
                <y:GenericNode configuration="com.yworks.entityRelationship.big_entity">
                  <y:Geometry height="100.0" width="242.01708984375" x="521.3667799249731" y="470.9024449291279"/>
                  <y:Fill color="#E8EEF7" color2="#B7C9E3" transparent="false"/>
                  <y:BorderStyle color="#000000" type="line" width="1.0"/>
                  <y:NodeLabel alignment="center" autoSizePolicy="node_width" backgroundColor="#B7C9E3" configuration="com.yworks.entityRelationship.label.name" fontFamily="Dialog" fontSize="15" fontStyle="bold" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="242.01708984375" x="0.0" xml:space="preserve" y="4.0">wait_reset</y:NodeLabel>
                  <y:NodeLabel alignment="left" autoSizePolicy="content" configuration="com.yworks.entityRelationship.label.attributes" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="64.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="221.72265625" x="2.0" xml:space="preserve" y="34.37646484375">entry/
    me-&gt;DeathTime = 0;

TIME_TICK_1S/
    Flash(255, 0, 0, FLASH_MS/5);<y:LabelModel><y:ErdAttributesNodeLabelModel/></y:LabelModel><y:ModelParameter><y:ErdAttributesNodeLabelModelParameter/></y:ModelParameter></y:NodeLabel>
                  <y:StyleProperties>
                    <y:Property class="java.lang.Boolean" name="y.view.ShadowNodePainter.SHADOW_PAINTING" value="true"/>
                    <y:Property class="java.lang.Boolean" name="doubleBorder" value="false"/>
                  </y:StyleProperties>
                </y:GenericNode>
              </data>
            </node>
          </graph>
        </node>
        <node id="n0::n1">
          <data key="d6">
            <y:GenericNode configuration="com.yworks.bpmn.Event.withShadow">
              <y:Geometry height="17.0" width="183.83984375" x="725.9081442803555" y="512.4024449291279"/>
              <y:Fill color="#333333" color2="#000000" transparent="false"/>
              <y:BorderStyle color="#000000" type="line" width="1.0"/>
              <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="187.83984375" y="4.333333333333371">
                <y:LabelModel>
                  <y:SmartNodeLabelModel distance="4.0"/>
                </y:LabelModel>
                <y:ModelParameter>
                  <y:SmartNodeLabelModelParameter labelRatioX="-0.5" labelRatioY="-0.5" nodeRatioX="0.5" nodeRatioY="-0.24509803921568613" offsetX="4.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
                </y:ModelParameter>
              </y:NodeLabel>
              <y:StyleProperties>
                <y:Property class="com.yworks.yfiles.bpmn.view.EventCharEnum" name="com.yworks.bpmn.characteristic" value="EVENT_CHARACTERISTIC_START"/>
                <y:Property class="java.awt.Color" name="com.yworks.bpmn.icon.line.color" value="#000000"/>
                <y:Property class="java.awt.Color" name="com.yworks.bpmn.icon.fill2" value="#d4d4d4cc"/>
                <y:Property class="java.awt.Color" name="com.yworks.bpmn.icon.fill" value="#ffffffe6"/>
                <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="EVENT_TYPE_PLAIN"/>
              </y:StyleProperties>
            </y:GenericNode>
          </data>
        </node>
        <node id="n0::n2" yfiles.foldertype="group">
          <data key="d4" xml:space="preserve"/>
          <data key="d5"/>
          <data key="d6">
            <y:ProxyAutoBoundsNode>
              <y:Realizers active="0">
                <y:GroupNode>
                  <y:Geometry height="541.7243812686506" width="665.4165541936063" x="139.9551973670183" y="-145.5404582331732"/>
                  <y:Fill color="#F5F5F5" transparent="false"/>
                  <y:BorderStyle color="#000000" type="line" width="1.0"/>
                  <y:NodeLabel alignment="center" autoSizePolicy="node_width" backgroundColor="#EBEBEB" borderDistance="0.0" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="665.4165541936063" x="0.0" xml:space="preserve" y="0.0">alive</y:NodeLabel>
                  <y:NodeLabel alignment="left" autoSizePolicy="node_size" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="541.7243812686506" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="665.4165541936063" x="0.0" xml:space="preserve" y="4.0">

entry/ 
    
SHINE_RCVD/
    Flash(255, 0, 255, 1000*SHINE_FLASH_S);
    Vibro(VIBRO_MS);

CENTRAL_BUTTON_PRESSED/
    ShowHP(me);


</y:NodeLabel>
                  <y:Shape type="roundrectangle"/>
                  <y:State closed="false" closedHeight="50.0" closedWidth="50.0" innerGraphDisplayEnabled="false"/>
                  <y:NodeBounds considerNodeLabelSize="true"/>
                  <y:Insets bottom="15" bottomF="15.0" left="15" leftF="15.0" right="15" rightF="15.0" top="15" topF="15.0"/>
                  <y:BorderInsets bottom="11" bottomF="11.12646484375" left="113" leftF="112.5" right="134" rightF="133.69780419360632" top="53" topF="52.5"/>
                </y:GroupNode>
                <y:GroupNode>
                  <y:Geometry height="50.0" width="50.0" x="0.0" y="60.0"/>
                  <y:Fill color="#F5F5F5" transparent="false"/>
                  <y:BorderStyle color="#000000" type="dashed" width="1.0"/>
                  <y:NodeLabel alignment="right" autoSizePolicy="node_width" backgroundColor="#EBEBEB" borderDistance="0.0" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="59.02685546875" x="-4.513427734375" xml:space="preserve" y="0.0">Folder 3</y:NodeLabel>
                  <y:Shape type="roundrectangle"/>
                  <y:State closed="true" closedHeight="50.0" closedWidth="50.0" innerGraphDisplayEnabled="false"/>
                  <y:Insets bottom="5" bottomF="5.0" left="5" leftF="5.0" right="5" rightF="5.0" top="5" topF="5.0"/>
                  <y:BorderInsets bottom="0" bottomF="0.0" left="0" leftF="0.0" right="0" rightF="0.0" top="0" topF="0.0"/>
                </y:GroupNode>
              </y:Realizers>
            </y:ProxyAutoBoundsNode>
          </data>
          <graph edgedefault="directed" id="n0::n2:">
            <node id="n0::n2::n0">
              <data key="d6">
                <y:GenericNode configuration="com.yworks.entityRelationship.big_entity">
                  <y:Geometry height="149.09023733126747" width="352.3158287052387" x="281.2051973670183" y="-55.66399338942321"/>
                  <y:Fill color="#E8EEF7" color2="#B7C9E3" transparent="false"/>
                  <y:BorderStyle color="#000000" type="line" width="1.0"/>
                  <y:NodeLabel alignment="center" autoSizePolicy="node_width" backgroundColor="#B7C9E3" configuration="com.yworks.entityRelationship.label.name" fontFamily="Dialog" fontSize="15" fontStyle="bold" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="352.3158287052387" x="0.0" xml:space="preserve" y="4.0">normal</y:NodeLabel>
                  <y:NodeLabel alignment="left" autoSizePolicy="content" configuration="com.yworks.entityRelationship.label.attributes" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="112.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="373.46875" x="2.0" xml:space="preserve" y="34.37646484375">entry/
    State_Save(NORMAL);

DMG_RCVD [else]/
    HP_UPDATE(me, me-&gt;CharHP - ((HealthQEvt*)e)-&gt;value);

PILL_HEAL/
    HP_UPDATE(me, me-&gt;MaxHP);
    Flash(255, 165, 0, FLASH_MS);<y:LabelModel><y:ErdAttributesNodeLabelModel/></y:LabelModel><y:ModelParameter><y:ErdAttributesNodeLabelModelParameter/></y:ModelParameter></y:NodeLabel>
                  <y:StyleProperties>
                    <y:Property class="java.lang.Boolean" name="y.view.ShadowNodePainter.SHADOW_PAINTING" value="true"/>
                    <y:Property class="java.lang.Boolean" name="doubleBorder" value="false"/>
                  </y:StyleProperties>
                </y:GenericNode>
              </data>
            </node>
            <node id="n0::n2::n1">
              <data key="d6">
                <y:GenericNode configuration="com.yworks.entityRelationship.big_entity">
                  <y:Geometry height="205.34023733126747" width="373.80289665027203" x="267.4551973670183" y="151.68099334797736"/>
                  <y:Fill color="#E8EEF7" color2="#B7C9E3" transparent="false"/>
                  <y:BorderStyle color="#000000" type="line" width="1.0"/>
                  <y:NodeLabel alignment="center" autoSizePolicy="node_width" backgroundColor="#B7C9E3" configuration="com.yworks.entityRelationship.label.name" fontFamily="Dialog" fontSize="15" fontStyle="bold" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="t" textColor="#000000" verticalTextPosition="bottom" visible="true" width="373.80289665027203" x="0.0" xml:space="preserve" y="4.0">danger</y:NodeLabel>
                  <y:NodeLabel alignment="left" autoSizePolicy="content" configuration="com.yworks.entityRelationship.label.attributes" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="184.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="373.46875" x="2.0" xml:space="preserve" y="34.37646484375003">entry/
    State_Save(DANGER);
    DangerTime_Update(0);
    Vibro(VIBRO_MS);

HEAL[else]/
 HP_Update(me, me-&gt;CharHP + ((HealthQEvt*)e-&gt;value));

DMG_RCVD [else]/
    HP_Update(me, me-&gt;CharHP - ((HealthQEvt*)e)-&gt;value);

TIME_TICK_1S[else]/
    DangerTime_Update(me, me-&gt;DangerTime+1);
    Flash(255, 0, 0, FLASH_MS);
  <y:LabelModel><y:ErdAttributesNodeLabelModel/></y:LabelModel><y:ModelParameter><y:ErdAttributesNodeLabelModelParameter/></y:ModelParameter></y:NodeLabel>
                  <y:StyleProperties>
                    <y:Property class="java.lang.Boolean" name="y.view.ShadowNodePainter.SHADOW_PAINTING" value="true"/>
                    <y:Property class="java.lang.Boolean" name="doubleBorder" value="false"/>
                  </y:StyleProperties>
                </y:GenericNode>
              </data>
            </node>
          </graph>
        </node>
      </graph>
    </node>
    <node id="n1">
      <data key="d4" xml:space="preserve"/>
      <data key="d6">
        <y:UMLNoteNode>
          <y:Geometry height="167.84023733126747" width="332.8439937092118" x="-249.1769210580611" y="-182.9169230769232"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="160.0" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="tl" textColor="#000000" verticalTextPosition="bottom" visible="true" width="307.4921875" x="4.0" xml:space="preserve" y="4.0">Code for h-file: (do not delete this caption):


#define NORMAL 0
#define DANGER 1
#define DEAD 2
#define FLASH_MS 500
#define SHORT_VIBRO_MS 200
#define VIBRO_MS 300
#define DANGER_TO_S 3600
#define HP_THRESH 10
#define DEATH_TO_S 30
#define SHINE_FLASH_S 15
</y:NodeLabel>
        </y:UMLNoteNode>
      </data>
    </node>
    <node id="n2">
      <data key="d4" xml:space="preserve"/>
      <data key="d6">
        <y:UMLNoteNode>
          <y:Geometry height="338.05617332907826" width="330.1463207517571" x="-247.82808457933376" y="5.154647736364325"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="328.0" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="br" textColor="#000000" verticalTextPosition="bottom" visible="true" width="314.08984375" x="12.056477001757116" xml:space="preserve" y="6.0561733290783195">Constructor code: (do not delete this caption):
    me-&gt;CharHP = HP;
    me-&gt;MaxHP = MaxHP;
    me-&gt;DefaultHP = DefaultHP;
    me-&gt;ScaleStep = 255/MaxHP;
    me-&gt;DangerTime = 0;
    switch (State) {
        case NORMAL: {
            me-&gt;StartState = 
            (QStateHandler)&amp;Health_normal;
            break;
        }
        case DANGER: {
            me-&gt;StartState = 
            (QStateHandler)&amp;Health_danger;
            break;
        }        
        case DEAD: {
            me-&gt;StartState = 
            (QStateHandler)&amp;Health_wait_reset;
            break;
  
        }
        default:
            me-&gt;StartState = 
            (QStateHandler)&amp;Health_wait_reset;
    }  
</y:NodeLabel>
        </y:UMLNoteNode>
      </data>
    </node>
    <node id="n3">
      <data key="d4" xml:space="preserve"/>
      <data key="d6">
        <y:UMLNoteNode>
          <y:Geometry height="109.96125702570919" width="331.49515723048444" x="-248.50250281869742" y="385.5307294915109"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="88.0" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="tl" textColor="#000000" verticalTextPosition="bottom" visible="true" width="281.1015625" x="4.0" xml:space="preserve" y="4.0">State fields (do not delete this caption):
unsigned int CharHP;
unsigned int MaxHP;
unsigned int DefaultHP;
unsigned int ScaleStep;
QStateHandler* StartState;
unsigned int DangerTime;</y:NodeLabel>
        </y:UMLNoteNode>
      </data>
    </node>
    <node id="n4">
      <data key="d4" xml:space="preserve"/>
      <data key="d6">
        <y:UMLNoteNode>
          <y:Geometry height="45.0" width="330.1463207517571" x="-252.55090923814714" y="645.6209668227784"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="28.0" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="tl" textColor="#000000" verticalTextPosition="bottom" visible="true" width="281.1015625" x="4.0" xml:space="preserve" y="4.0">Event fields (do not delete this caption):
    int value;</y:NodeLabel>
        </y:UMLNoteNode>
      </data>
    </node>
    <node id="n5">
      <data key="d4" xml:space="preserve"/>
      <data key="d6">
        <y:UMLNoteNode>
          <y:Geometry height="120.12898030555834" width="336.21798188929785" x="-252.55090923814714" y="506.7419865172201"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="64.0" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="tl" textColor="#000000" verticalTextPosition="bottom" visible="true" width="320.6875" x="4.0" xml:space="preserve" y="4.0">Constructor fields (do not delete this caption):
unsigned int HP;
unsigned int MaxHP;
unsigned int State;
unsigned int DangerTime;</y:NodeLabel>
        </y:UMLNoteNode>
      </data>
    </node>
    <node id="n6">
      <data key="d4" xml:space="preserve"/>
      <data key="d6">
        <y:UMLNoteNode>
          <y:Geometry height="694.192903162301" width="366.8784784109083" x="964.1349492249503" y="-177.9169230769231"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="592.0" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="tl" textColor="#000000" verticalTextPosition="bottom" visible="true" width="564.80078125" x="4.0" xml:space="preserve" y="4.0">void Reset(Health* me) {
    UpdateHP(me, DefaultHP);
    UpdateMaxHP(me, DefaultHP);
    UpdateDangerTime(me, 0);
}

void HP_Update(Health* me, int HP) {
    if (Health &lt; me-&gt;CharHP) {
        IndicateDamage(me);
    }
    if  (HP &lt;= me-&gt;MaxHP) {
        if(HP &gt; 0) {
             me-&gt;CharHP = HP;
        else {
             HP = 1;
        }
    } else {
         me-&gt;CharHP = me-&gt;MaxHP;
    }
    HP_Save(HP);   
}

void MaxHP_Update(Health* me, int MaxHP) {
    me-&gt;MaxHP = MaxHP;
    MaxHp_Save(MaxHP);
}

void DangerTime_Update(Health* me, unsigned int Time) {
    me-&gt;DangerTime = Time;
    DangerTime_Save(Time);
}

void Player_Died(Health* me) {
    State_Save(DEAD);
    HP_Update(me, 0);
    Vibro(DEATH_TO_S*1000/3);
    Flash(255, 0, 0, DEATH_TO_S*1000);
    SIMPLE_DISPACTH(the_ability, DISABLE);
}

void ShowHP(MHoS* me) {
   Flash(255 - me-&gt;CharHP*me-&gt;ScaleStep, me&gt;CharHP*me-&gt;ScaleStep, 0, SHORT_FLASH_MS);
   
}    

void IndicateDamage(Health* me) {
    ShowHP(me);
    Vibro(VIBRO_MS);
} </y:NodeLabel>
        </y:UMLNoteNode>
      </data>
    </node>
    <node id="n7">
      <data key="d4" xml:space="preserve"/>
      <data key="d6">
        <y:UMLNoteNode>
          <y:Geometry height="100.0" width="332.84399370921165" x="962.7479880303555" y="539.7474316665284"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="88.0" horizontalTextPosition="center" iconTextGap="4" modelName="internal" modelPosition="tl" textColor="#000000" verticalTextPosition="bottom" visible="true" width="274.50390625" x="4.0" xml:space="preserve" y="4.0">Code for cpp-file:
(do not delete this caption):

//this code is for stubs only
unsigned int DangerTO = DANGER_TO_S;
unsigned int DefaultHP = DEFAULT_HP;
undigned int HPThreshold = HP_THRESHOLD; </y:NodeLabel>
        </y:UMLNoteNode>
      </data>
    </node>
    <edge id="n0::e0" source="n0::n1" target="n0::n0::n1">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#FFFFFF" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="anywhere" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="179.716796875" x="-79.41229248046875" xml:space="preserve" y="13.8734130859375">return Q_TRAN(me-&gt;StartState);<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" frozen="true" placement="anywhere" side="anywhere" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e0" source="n0" target="n0::n2::n0">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="-201.32453594084373" sy="-142.8556385180202" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#F5F5F5" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="centered" modelPosition="center" preferredPlacement="center_on_edge" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="44.0078125" x="-218.1968717247786" xml:space="preserve" y="-296.6777110407904">RESET<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" placement="center" side="on_edge" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="n0::n2::e0" source="n0::n2::n1" target="n0::n2::n0">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="9.832878469421848" sy="-9.06280364376129" tx="-2.7006060738763797" ty="55.719393576502554">
            <y:Point x="255.70865818018137" y="224.13051100448754"/>
            <y:Point x="255.70865818018137" y="104.81739461365792"/>
            <y:Point x="255.70865818018137" y="66.66666666666666"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="left" backgroundColor="#FFFFFF" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="48.103515625" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="center_on_edge" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="188.078125" x="-152.74233270622508" xml:space="preserve" y="-106.02827489643659">PILL_HEAL/
    HP_Update(me, me-&gt;MaxXP);
    Flash(255, 165, 0, FLASH_MS);<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" placement="center" side="on_edge" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="n0::n2::e1" source="n0::n2::n1" target="n0::n2::n0">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="-0.11311171963762945" ty="54.6079908028271">
            <y:Point x="719.8753248468481" y="254.3511120136111"/>
            <y:Point x="719.8753248468481" y="181.0"/>
            <y:Point x="719.8753248468481" y="130.6011259739721"/>
            <y:Point x="719.8753248468481" y="74.54273461632269"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#F5F5F5" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="center_on_edge" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="335.79296875" x="-81.17931758998338" xml:space="preserve" y="-68.17727661132812">HEAL[me-&gt;CharHP + ((HealthQEvt*)e-&gt;value)  &gt;= HPThresh]/
    HP_Update(me, me-&gt;CharHP + ((HealthQEvt*)e-&gt;value));<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" placement="center" side="on_edge" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e1" source="n0" target="n0::n2::n0">
      <data key="d10">
        <y:GenericEdge configuration="DEFAULT">
          <y:Path sx="-252.84281537972495" sy="-198.84892273894536" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#FFFFFF" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="center_on_edge" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="72.009765625" x="252.76882948857565" xml:space="preserve" y="-21.743351044057903">RESET/
    reset(me);<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" placement="center" side="on_edge" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
        </y:GenericEdge>
      </data>
    </edge>
    <edge id="n0::e1" source="n0::n2::n1" target="n0::n0::n0">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="-15.600148150925861" sy="94.4018176738889" tx="120.57211387267944" ty="19.249396477215214"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#F5F5F5" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="center_on_edge" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="258.771484375" x="-128.75385707816514" xml:space="preserve" y="121.63294545218423">TIME_TICK_1S[me-&gt;danger_time &gt; DangerTO]<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" placement="center" side="on_edge" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="n0::n0::e0" source="n0::n0::n0" target="n0::n0::n1">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="318.184383668549" y="608.5431315104166"/>
            <y:Point x="642.3753248468481" y="608.5431315104166"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#F5F5F5" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="center_on_edge" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="280.744140625" x="17.562975244227005" xml:space="preserve" y="24.51475016276038">TIME_TICK_1S [me-&gt;DeathTimer &gt; DEATH_TO_S]<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" placement="center" side="on_edge" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="n0::n2::e2" source="n0::n2::n0" target="n0::n2::n1">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="-90.6087996365375"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#FFFFFF" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" preferredPlacement="center_on_edge" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="382.78515625" x="-191.9976563014775" xml:space="preserve" y="12.454100822645188">DMG_RCVD[me-&gt;CharHP - ((HealthQEvt*)e)-&gt;value &lt;= HPThreshold]/
    HP_Update(me, me-&gt;CharHP - ((HealthQEvt*)e)-&gt;value);<y:LabelModel><y:SmartEdgeLabelModel autoRotationEnabled="false" defaultAngle="0.0" defaultDistance="10.0"/></y:LabelModel><y:ModelParameter><y:SmartEdgeLabelModelParameter angle="6.283185307179586" distance="104.81240612648587" distanceToCenter="true" position="center" ratio="0.5" segment="0"/></y:ModelParameter><y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" placement="center" side="on_edge" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="n0::e2" source="n0::n2::n1" target="n0::n0::n0">
      <data key="d10">
        <y:GenericEdge configuration="com.yworks.bpmn.Connection">
          <y:Path sx="-1.5353630111665868" sy="70.99009612959041" tx="-67.47572548836763" ty="3.2240199146220903">
            <y:Point x="250.70865818018137" y="306.5982684880291"/>
            <y:Point x="250.70865818018137" y="404.0259800853779"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#FFFFFF" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasLineColor="false" height="16.0" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="anywhere" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="347.078125" x="-210.7074180853445" xml:space="preserve" y="63.5127929120427">DMG_RCVD[me-&gt;CharHP - ((HealthQEvt*)e)-&gt;value &lt;= 0]/<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" frozen="true" placement="anywhere" side="anywhere" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:StyleProperties>
            <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="CONNECTION_TYPE_MESSAGE_FLOW"/>
          </y:StyleProperties>
        </y:GenericEdge>
      </data>
    </edge>
    <edge id="e2" source="n0" target="n0::n2::n0">
      <data key="d10">
        <y:GenericEdge configuration="com.yworks.bpmn.Connection">
          <y:Path sx="199.38113257489684" sy="-253.46963886581293" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:EdgeLabel alignment="center" backgroundColor="#FFFFFF" configuration="AutoFlippingLabel" distance="2.0" fontFamily="Consolas" fontSize="12" fontStyle="plain" hasLineColor="false" height="28.0" horizontalTextPosition="center" iconTextGap="4" modelName="free" modelPosition="anywhere" preferredPlacement="anywhere" ratio="0.5" textColor="#000000" verticalTextPosition="bottom" visible="true" width="96.3671875" x="-424.5161397143839" xml:space="preserve" y="15.477788293817184">PILL_RESET/
    Reset(me);<y:PreferredPlacementDescriptor angle="0.0" angleOffsetOnRightSide="0" angleReference="absolute" angleRotationOnRightSide="co" distance="-1.0" frozen="true" placement="anywhere" side="anywhere" sideReference="relative_to_edge_flow"/></y:EdgeLabel>
          <y:StyleProperties>
            <y:Property class="com.yworks.yfiles.bpmn.view.BPMNTypeEnum" name="com.yworks.bpmn.type" value="CONNECTION_TYPE_MESSAGE_FLOW"/>
          </y:StyleProperties>
        </y:GenericEdge>
      </data>
    </edge>
  </graph>
  <data key="d7">
    <y:Resources/>
  </data>
</graphml>
